{% extends'Front_Office/Header-Footer.html.twig' %}

{% block title %}
	Hebergement Detail
{% endblock %}

{% block Content %}
    <link rel="stylesheet" href="{{ asset ('https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css')}}">

<br><br>
<br>

	<section>
		<!-- Slider main container-->
		<div
			class="swiper-container detail-slider slider-gallery">
			<!-- Additional required wrapper-->
			<div class="swiper-wrapper">
				{% for image in hebergement. getImagesHebergements() %}
					<!-- Slides-->
					<div class="swiper-slide">
						<img class="img-fluid" src="{{ asset('/uploads/hebergements/'~ image.getNomImg()) }}" width="200 " alt="image"></a>
				</div>
			{% endfor %}
		</div>
		<div class="swiper-pagination swiper-pagination-white"></div>
		<div class="swiper-button-prev swiper-button-white"></div>
		<div class="swiper-button-next swiper-button-white"></div>
	</div>
</section>


<div class="container py-5">
	<div class="row">
		<div class="col-lg-8">
			<div class="text-block">
				<p class="text-primary">
					<i class="fa-map-marker-alt fa mr-1"></i>
					{{hebergement.getAdresseHbrg()}}</p>
				<h1>{{hebergement.getNomHbrg()}}</h1>
				<p class="text-muted text-uppercase mb-4">{{hebergement.TypeHbrg.getNomTypeHbrg() }}</p>
			</p>
			<ul class="list-inline text-sm mb-4">
				<li class="list-inline-item mr-3">
					<i class="fa fa-users fa-2x mr-1 text-secondary" ></i>
					<h6>{{hebergement.getNbrPlaceHbrg()}}
					available places </h6>
				</li>

			</ul>

			</div>

			<div class="text-block">
				<div class="media">
					{% if hebergement.proprietaire is null %}
						<img class="avatar avatar-lg mr-4" src="{{ asset ('DefaultProp.png')}}" alt="owner"/>
					{% else %}
						<img class="avatar avatar-lg mr-4" src="{{ asset('/uploads/proprietaires/'~ hebergement.proprietaire.getImgProp())}}" alt="prop img"/>
					{% endif %}
					<div class="media-body">
						<p>
							<span class="text-muted text-uppercase text-sm">Hosted by
							</span><br>
							<strong>
								{{ hebergement.proprietaire is null? hebergement.user.getNomUtl ~ ' ' ~ hebergement.user.getPrenomUtl :  hebergement.proprietaire.getNomProp() ~ ' ' ~ hebergement.proprietaire.getPrenomProp() }}
							</strong>
						</p>
						<p class="text-muted text-sm mb-2">
						{{ hebergement.proprietaire is null? ' no phone number':   hebergement.proprietaire.getNumTlfProp()  }}

						
						 </p>

						{% if hebergement.proprietaire is null %}
								<p class="text-sm">
									<a  href="{{ path('ListHebergementUtilisateurProp',{'id':hebergement.user.getId()}) }}">See
										{{hebergement.user.getPrenomUtl()}}'s other listings
										<i class="fa fa-long-arrow-alt-right ml-2"></i>
									</a>
								</p>
							{% else %}
								<p class="text-sm">
									<a href="{{ path('ListHebergementUtilisateurProp',{'id':hebergement.proprietaire.getId()}) }}"  >See
										{{hebergement.proprietaire.getNomProp()}}'sother listings
										<i class="fa fa-long-arrow-alt-right ml-2"></i>
									</a>
								</p>
						{% endif %}
					</div>
				</div>
			</div>
			<div class="text-block">
				<h5 class="mb-4">Gallery</h5>
				{% for image in hebergement.ImagesHebergements %}
					<div class="row gallery mb-3 ml-n1 mr-n1">
						<div class="col-lg-4 col-6 px-1 mb-2">
							<img class="img-fluid" src="{{ asset('/uploads/hebergements/'~ image.getNomImg()) }}" alt="..."></a>
					</div>
				</div>

			{% else %}
				<h6>
					No pictures of this Accomadation
				</h6>
			{% endfor %}

		</div>

	</div>
	<div class="col-lg-4">
		<div class="p-4 shadow ml-lg-4 rounded sticky-top" style="top: 100px;">
			<img class="img-fluid" src="{{ asset('/uploads/hebergements/'~ hebergement.getImgHbrg()) }}" alt="..."></a>
		<p class="text-muted">
			<span class="text-primary h2">{{ hebergement.getPrixHbrg() }}TND</span>
			per night</p>
		<hr class="my-4">
		<form class="form" id="booking-form" method="get" action="#" autocomplete="off">

			<div class="form-group">
				<button class="btn btn-primary btn-block" type="submit">
					<a color="style:white !important" "href="{{ path('HebergementReserver', {'id': hebergement.getId() }) }}">
						Book your stay
					</a>
				</button>
			</div>
			<hr>
			<div class="stars" style="text-align:center !important">
				<i class="lar la-star" data-value="1"></i><i class="lar la-star" data-value="2"></i><i class="lar la-star" data-value="3"></i><i class="lar la-star" data-value="4"></i><i class="lar la-star" data-value="5"></i>
			</div>
			<input type="hidden" name="note" id="note" value="0">
		</form>

	</div>
</div></div></div>






<script type="text/javascript">

window.onload = () => {
    // On va chercher toutes les étoiles
    const stars = document.querySelectorAll(".la-star");
    
    // On va chercher l'input
    const note = document.querySelector("#note");

    // On boucle sur les étoiles pour le ajouter des écouteurs d'évènements
    for(star of stars){
        // On écoute le survol
        star.addEventListener("mouseover", function(){
            resetStars();
            this.style.color = "red";
            this.classList.add("las");
            this.classList.remove("lar");
            // L'élément précédent dans le DOM (de même niveau, balise soeur)
            let previousStar = this.previousElementSibling;

            while(previousStar){
                // On passe l'étoile qui précède en rouge
                previousStar.style.color = "red";
                previousStar.classList.add("las");
                previousStar.classList.remove("lar");
                // On récupère l'étoile qui la précède
                previousStar = previousStar.previousElementSibling;
            }
        });

        // On écoute le clic
        star.addEventListener("click", function(){
            note.value = this.dataset.value;
        });

        star.addEventListener("mouseout", function(){
            resetStars(note.value);
        });
    }

    /**
     * Reset des étoiles en vérifiant la note dans l'input caché
     * @param {number} note 
     */
    function resetStars(note = 0){
        for(star of stars){
            if(star.dataset.value > note){
                star.style.color = "black";
                star.classList.add("lar");
                star.classList.remove("las");
            }else{
                star.style.color = "red";
                star.classList.add("las");
                star.classList.remove("lar");
            }
        }
    }
}

</script>




{% endblock %}
